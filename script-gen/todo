# show any TODOs contained in comments in source code

@import COLOR_RESET from .bash_colors
@import COLOR_FG_BOLD_BLUE from .bash_colors

in_dir="${1:-.}" # default to current directory

# possible comment styles
hash_comments='#'         # Python, Bash, Ruby, Perl
slash_comments='//'       # C/C++, Javascript, Java, PHP
dquote_comments='"'       # vim script
html_comments='<!--'      # HTML, XML
slash_block_comments='/*' # C/C++, CSS, Java
dash_comments='--'        # SQL

matched_lines="$(grep \
  -nrIF \
  --color=always \
  --exclude-dir bower_components \
  --exclude-dir node_modules \
  --exclude-dir target \
  --exclude-dir .git \
  --exclude-dir .vim \
  -e "$hash_comments TODO" \
  -e "$slash_comments TODO" \
  -e "$dquote_comments TODO" \
  -e "$html_comments TODO" \
  -e "$slash_block_comments TODO" \
  -e "$dash_comments TODO" \
  "$in_dir" \
  2>/dev/null \
)"


num_lines="$(echo "$matched_lines" | wc -l | tr -d '[:space:]')"

echo "$matched_lines"
echo -e "${COLOR_FG_BOLD_BLUE}total: $num_lines${COLOR_RESET}"

