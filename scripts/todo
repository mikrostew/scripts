#!/usr/bin/env bash

# show any TODOs contained in comments in source code

COLOR_FG_BOLD_BLUE='\033[1;34m'
COLOR_RESET='\033[0m'

in_dir="${1:-.}" # default to current directory

# TODO: include other possible comment styles
hash_comments='#'
slash_comments='//'
vim_comments='"'

matched_lines="$(grep \
  -nrI \
  --color=always \
  --exclude-dir bower_components \
  --exclude-dir node_modules \
  --exclude-dir target \
  --exclude-dir .git \
  --exclude-dir .vim \
  -e "$hash_comments TODO" \
  -e "$slash_comments TODO" \
  -e "$vim_comments TODO" \
  "$in_dir" \
  2>/dev/null \
)"

num_lines="$(echo "$matched_lines" | wc -l | tr -d '[:space:]')"

echo "$matched_lines"
echo -e "${COLOR_FG_BOLD_BLUE}total: $num_lines${COLOR_RESET}"

